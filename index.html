<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Report de Projetos</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f4f4f4;margin:0;padding:20px}
    h1{text-align:center;margin-top:0}
    form{background:#fff;padding:20px;border-radius:8px;max-width:800px;margin:0 auto;box-shadow:0 2px 5px rgba(0,0,0,.1)}
    input,select,button{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:5px;font-size:.95rem}
    #projectList{max-width:800px;margin:20px auto;background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);padding:15px}
    #projectList ul{padding-left:20px;margin:0}
    #generateReportBtn{display:block;width:300px;margin:30px auto;padding:12px;background:#001f3f;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:1rem}
  </style>
</head>
<body>
<h1>Gerador de Report de Projetos</h1>

<form id="projectForm">
  <input type="text" id="title" placeholder="Título do Projeto" required />
  <input type="text" id="id" placeholder="ID do Projeto" />
  <input type="date" id="date" placeholder="Data de Entrega" required />
  <input type="text" id="team" placeholder="Equipe/Time" required />
  <input type="text" id="dev" placeholder="Desenvolvedor(a) (opcional)" />
  <input type="text" id="beneficiary" placeholder="Parte Favorecida" required />
  <select id="status" required>
    <option value="Entregue">Entregue ✅</option>
    <option value="Previsto">Previsto ⏳</option>
    <option value="Em Atraso">Em Atraso ⚠️</option>
  </select>
  <button type="submit">Adicionar Projeto</button>
</form>

<div id="projectList"><h3>Projetos Adicionados:</h3><ul id="list"></ul></div>
<button id="generateReportBtn" type="button">Gerar Página de Report</button>

<script>
const form = document.getElementById('projectForm');
const list = document.getElementById('list');
const generateBtn = document.getElementById('generateReportBtn');
const projetos = JSON.parse(localStorage.getItem('projetos')) || [];

function atualizarLista() {
  list.innerHTML = '';
  projetos.forEach(p => {
    const li = document.createElement('li');
    li.textContent = `${p.title} (${p.status}) - ${p.date}`;
    list.appendChild(li);
  });
}

form.addEventListener('submit', e => {
  e.preventDefault();
  const p = {
    title: form.title.value.trim(),
    id: form.id.value.trim(),
    date: form.date.value,
    team: form.team.value.trim(),
    dev: form.dev.value.trim(),
    beneficiary: form.beneficiary.value.trim(),
    status: form.status.value
  };
  projetos.push(p);
  localStorage.setItem('projetos', JSON.stringify(projetos));
  atualizarLista();
  form.reset();
});

generateBtn.addEventListener('click', () => {
  if (projetos.length === 0) {
    alert('Adicione ao menos um projeto.');
    return;
  }
  gerarRelatorio();
});

function gerarRelatorio() {
  const colors = {
    Entregue: '#20c997',
    Previsto: '#0d6efd',
    'Em Atraso': '#fd7e14'
  };
  const cardsHtml = projetos.map(p => `
    <div class="card status-${p.status.toLowerCase().replace(' ', '')}">
      <h3>${p.title}${p.id ? ` (<em>${p.id}</em>)` : ''}</h3>
      <ul style="list-style:none;padding-left:0">
        <li><strong>Data de Entrega:</strong> ${p.date}</li>
        <li><strong>Equipe/Time:</strong> ${p.team}</li>
        ${p.dev ? `<li><strong>Desenvolvedor(a):</strong> ${p.dev}</li>` : ''}
        <li><strong>Parte Favorecida:</strong> ${p.beneficiary}</li>
        <li><strong>Status:</strong> <span class="badge" style="background:${colors[p.status]}">${p.status}</span></li>
      </ul>
    </div>
  `).join('');

  const html = `<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><title>Status Report – Projetos</title>
    <style>body{font-family:Arial,sans-serif;background:#f7f7f7;margin:0;padding:0}header{background:#001f3f;color:#fff;padding:20px;text-align:center;font-weight:bold;font-size:1.5rem}.filters{text-align:center;margin:20px 0}.filters button{margin:5px;padding:8px 16px;border:none;border-radius:4px;cursor:pointer;background:#6c757d;color:#fff;font-weight:bold}.filters button.active{background:#0d6efd}.card{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);margin:10px auto;padding:15px;max-width:700px;transition:transform .2s}.card:hover{transform:scale(1.01)}.badge{color:#fff;padding:4px 10px;border-radius:4px;font-size:.8rem;display:inline-block}.hidden{display:none}</style></head><body>
    <header>STATUS REPORT – PROJETOS (${new Date().toLocaleDateString('pt-BR')})</header>
    <div class="filters">
      <button data-filter="all" class="active">Todos</button>
      <button data-filter="status-entregue">Entregues</button>
      <button data-filter="status-previsto">Previstos</button>
      <button data-filter="status-ematraso">Em Atraso</button>
    </div>
    ${cardsHtml}
    <script>window.onload=function(){const buttons=document.querySelectorAll(".filters button");const cards=document.querySelectorAll(".card");buttons.forEach(btn=>btn.addEventListener("click",e=>{buttons.forEach(b=>b.classList.remove("active"));e.target.classList.add("active");const filter=e.target.getAttribute("data-filter");cards.forEach(c=>{if(filter==="all"){c.classList.remove("hidden");}else{c.classList.toggle("hidden",!c.classList.contains(filter));}});}));};<\/script>
    </body></html>`;

  const newWindow = window.open('', '_blank');
  newWindow.document.write(html);
  newWindow.document.close();
}

atualizarLista();
</script>
</body>
</html>
